{
  "$schema": "http://json-schema.org/draft-07/schema",
  "title": "Device State",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "meta": {
      "type": "object",
      "properties": {
        "version": {
          "const": "2022.5.14"
        }
      },
      "required": [
        "version"
      ]
    },
    "controlResponse": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "sessionId",
        "v"
      ],
      "properties": {
        "sessionId": {
          "description": "Generated random id representing the current session",
          "type": "string"
        },
        "v": {
          "description": "Version number of control docs issued in the current session. Starts at 0",
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "webrtc": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "sdp": {
          "type": "string"
        }
      },
      "required": [
        "sdp"
      ]
    },
    "mode": {
      "enum": [
        "SAFE",
        "MANUAL",
        "AUTO"
      ]
    },
    "utcEpoch": {
      "description": "Device epoch utc time (seconds)",
      "type": "number",
      "minimum": 0
    },
    "latitude": {
      "description": "GPS latitude",
      "type": "number",
      "minimum": -90,
      "maximum": 90
    },
    "longitude": {
      "description": "GPS longitude",
      "type": "number",
      "minimum": -90,
      "maximum": 90
    },
    "velocity": {
      "description": "Velocity (x,y,z) of the device in m/s. +y is defined as front of the robot.",
      "type": "array",
      "items": {
        "type": "number"
      },
      "minItems": 3,
      "maxItems": 3
    },
    "angularVelocity": {
      "description": "Angular velocity (x,y,z) of the device in deg/s. +y is defined as front of the robot.",
      "type": "array",
      "items": {
        "type": "number"
      },
      "minItems": 3,
      "maxItems": 3
    },
    "acceleration": {
      "description": "3 axis acceleration (x,y,z) acceleration of the device",
      "type": "array",
      "items": {
        "type": "number"
      },
      "minItems": 3,
      "maxItems": 3
    },
    "battery": {
      "description": "Battery percentage",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "ultrasonics": {
      "description": "List of ultrasonic readings (meters) counterclockwise from front of vehicle.",
      "type": "array",
      "items": {
        "type": "number",
        "minimum": 0
      },
      "minItems": 4,
      "maxItems": 4
    }
  },
  "required": [
    "meta",
    "utcEpoch",
    "mode"
  ]
}

